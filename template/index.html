<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE = edge">
    <meta name="viewport" content="width=device-width, initial-scale = 1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="/static/style.css">
    <link rel="icon" href="https://upload.wikimedia.org/wikipedia/commons/5/53/Ma%27aden_Logo_-_2.png">
    <title>Recovery Prediction App</title>
    <style>
        .right-img-container {
            position: absolute;
            right: 0;
            top: 0;
            height: 100%;
            overflow: hidden;
            z-index: 1;
        }

        .right-img {
            height: 100%;
        }

        .main-img {
            position: relative;
            z-index: 2;
        }

        .pattern-img-container {
            position: absolute;
            z-index: 0;
        }

        .pattern-img {
            width: 100%;
            height: 100%;
        }

        .content-container {
            position: relative;
            z-index: 3;
        }

        .background-section {
            background-image: url("/static/background.svg");
            width: 100%;
            background-position: center;
            height: auto;
            display: flex;
            align-items: flex-start;
            color: #fff;
            text-align: left;
        }

        .font-weight-bolder {
            font-weight: bold;
        }

        .font-weight-lighter {
            font-weight: 100;
        }

        .logo-img {
            position: absolute;
            top: 10px;
            right: 10px;
        }

        .input-container {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .input-wrapper {
            position: relative;
            margin-bottom: 20px;
        }

        .numeric-input {
            width: 200px;
            border: none;
            background-color: transparent;
            border-radius: 2px;
            padding: 5px;
            margin-right: 70px;
            margin-bottom: 10px;
            border-bottom: 1px solid #fff;
            transition: 0.1s ease;
        }

        .butn {
            padding: 10px 20px;
            background-color: #006853;
            color: #fff;
            border: none;
            cursor: pointer;
        }

        .input-container {
            position: relative;
            line-height: 40px;
        }

        .prediction-result {

            color: #CE8904; /* Text color */
            font-size: 60pt; /* Font size */

            font-weight: bold; /* Bold text */       
        }

        input:focus,
        input:valid {
            color: #006853;
            border-bottom: 3px solid #006853;
            background-color: transparent;
        }
        input:invalid{
            color: #FF6B6B;
            border: bottom 3px solid #FF6B6B ;
            background-color: transparent;
        }

        ::placeholder {
            color: rgb(98, 103, 103);
        }

        input:focus::placeholder,
        input:valid::placeholder {
            color: #006853;
            height: 60px;
            line-height: 60px;
            transform: translate(-25px, -25px) scale(0.75);
            z-index: 1111;

        }

        .numeric-input:valid {
            border-bottom: 3px solid #006853;
            background-color: transparent !important;
        }

        label {
            position: absolute;
            bottom: -30px;
            left: 0;
            font-size: 12px;
            color: darkgray;
        }

        .error-message {
            color: #FF6B6B;
            font-size: 12px;
            display: none;
            margin-top: 1px;
            position: relative;
            animation: fadeIn 0.3s ease-in-out;
        }

        .error-message::before {
            content: '⚠️';
            /* Unicode for a warning icon */
            margin-right: 5px;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(-5px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        .thumbnail { 
                top:-50px; 
                left:-35px; 
                display:block; 
                z-index:999; 
                cursor: pointer; 
                transition-delay: all; 
                transition-duration: 0.3s; 
                transition-timing-function: ease; 
} 

/*change the number below to scale to the appropriate size*/ 
.thumbnail:hover { 
transform: scale(1.06); 

}

        /* Additional styling for better input field appearance */
        
    </style>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
        $(document).ready(function () {

            $('.numeric-input').on('input', function () {
                this.value = this.value.replace(/[^0-9.]/g, ''); // Allow only digits and decimal point
            });

            $('.numeric-input').on('keydown', function (e) {
                if (e.key === "Enter") {
                    e.preventDefault();
                    var index = $('.numeric-input').index(this);
                    $('.numeric-input').eq(index + 1).focus();
                }
            });
            $('form').on('submit', function (e) {
                e.preventDefault(); // Prevent default form submission
                var features = [];
                $('.numeric-input').each(function () {
                    features.push(parseFloat($(this).val()) || 0);
                });

                $.ajax({
                    url: '/predict',
                    method: 'POST',
                    contentType: 'application/json',
                    data: JSON.stringify({ features: features }),
                    success: function (response) {
                        $('#prediction-result').text((response.prediction * 100).toFixed(2) + "%");
                    },
                    error: function (error) {
                        $('#prediction-result').text('Error: ' + error.responseText);
                    }
                });
            });
            function validateInputs() {
                var allValid = true;
                $('.numeric-input').each(function () {
                    var min = parseFloat(this.min);
                    var max = parseFloat(this.max);
                    var value = parseFloat(this.value);
                    var errorMessage = document.getElementById(this.id + '_error');

                    if (value > max) {
                        errorMessage.textContent = `Value must be less than or equal to ${max}`;
                        errorMessage.style.display = 'block';
                        allValid = false;
                    } else if (value < min) {
                        errorMessage.textContent = `Value must be greater than or equal to ${min}`;
                        errorMessage.style.display = 'block';
                        allValid = false;
                    } else {
                        errorMessage.textContent = '';
                        errorMessage.style.display = 'none';
                    }
                });
                return allValid;
            }

            $('.numeric-input').on('blur', function () {
                validateInputs();
            });
        });

    </script>
</head>

<body>
    <!----navbar----->
    <nav class="navbar navbar-expand-lg bg-light navbar-light">
        <div class="container">
            <a href="#" class="navbar-brand"><img src="/static/Ma'aden_Logo_-_2 1.svg" alt="maaden logo"
                    class="logo"></a>
            <div class="collabse navbar-collabse">
            </div>
        </div>
    </nav>
    <section class="bg-light text-dark p-5 p-lg-1 text-center text-sm-start">
        <div class="container">
            <div class="d-sm-flex align-items-center justify-content-between">
                <div class="pattern-img-container">
                    <img src="/static/Pattern.svg" alt="" class="pattern-img">
                </div>
                <div class="content-container">
                    <h1 class="font-weight-lighter">Here is PAP <span class="text-warning font-weight-bolder">
                            Recovery Prediction</span> AI Engine</h1>
                    <button class="btn btn-dark btn-lg rounded-pill"
                        onclick="scrollToSection('#background-section')">Get Started</button>
                </div>

                <div class="right-img-container">
                    <img src="/static/right_section_green.svg" alt="" class="right-img">
                </div>
                <div class="main-img">
                    <img src="/static/Recovery_img_asset.svg" alt="" class="w-200 thumbnail">
                </div>
            </div>
        </div>
    </section>
    <section id="background-section" class="background-section">
        <div class="text-left p-5">
            <h2 class="font-weight-bolder mb-5">Recovery Prediction AI Engine</h2>
            <h4 class="text-left mb-4">Feed in</h4>
            <form>
                <div class="input-container">
                    <div class="input-wrapper">
                        <input type="number" id="avg_p2o5" required class="numeric-input" placeholder="Average of P2O5"
                            min="25.00" max="33.00" step="0.01" >
                        <span id="avg_p2o5_error" class="error-message"></span>
                        <label for="avg_p2o5">Value between 25 - 33</label>
                    </div>
                    <div class="input-wrapper">
                        <input type="number" id="avg_cao" required class="numeric-input" placeholder="Average of CaO"
                            min="43" max="55" step="0.1">
                        <span id="avg_cao_error" class="error-message"></span>
                        <label for="avg_cao">Value between 43 - 55</label>
                    </div>
                    <div class="input-wrapper">
                        <input type="number" id="avg_total_solids" required class="numeric-input"
                            placeholder="Average of Total Solids" min="37" max="70" step="0.1" >
                        <span id="avg_total_solids_error" class="error-message"></span>
                        <label for="avg_total_solids">Value between 37 - 70</label>
                    </div>
                    <div class="input-wrapper">
                        <input type="number" id="avg_0_150_mm" required class="numeric-input"
                            placeholder="Average of +0.150 mm" min="37" max="69" step="0.1">
                        <span id="avg_0_150_mm_error" class="error-message"></span>
                        <label for="avg_0_150_mm">Value between 37 - 69</label>
                    </div>
                </div>
                <div class="input-container">
                    <div class="input-wrapper">
                        <input type="number" id="avg_1_mm" required class="numeric-input"
                            placeholder="Average of +1 mm %" min="0.01" max="27" step="0.01" >
                        <span id="avg_1_mm_error" class="error-message"></span>
                        <label for="avg_1_mm">Value between 0.01 - 27</label>
                    </div>
                    <div class="input-wrapper">
                        <input type="number" id="avg_al2o3" required class="numeric-input"
                            placeholder="Average of Al2O3" min="0.1" max="3" step="0.1" >
                        <span id="avg_al2o3_error" class="error-message"></span>
                        <label for="avg_al2o3">Value between 0.1 - 3</label>
                    </div>
                    <div class="input-wrapper">
                        <input type="number" id="avg_mgo" required class="numeric-input" placeholder="Average of MgO"
                            min="0.05" max="2" step="0.01">
                        <span id="avg_mgo_error" class="error-message"></span>
                        <label for="avg_mgo">Value between 0.05 - 2</label>
                    </div>
                    <div class="input-wrapper">
                        <input type="number" id="avg_fe2o3" required class="numeric-input"
                            placeholder="Average of Fe2O3" min="0.01" max="2" step="0.01" >
                        <span id="avg_fe2o3_error" class="error-message"></span>
                        <label for="avg_fe2o3">Value between 0.01 - 2</label>
                    </div>
                </div>
                <div class="input-container">
                    <div class="input-wrapper">
                        <input type="number" id="avg_sio2" required class="numeric-input" placeholder="Average of SiO2"
                            min="1" max="15" step="0.1" >
                        <span id="avg_sio2_error" class="error-message"></span>
                        <label for="avg_sio2">Value between 1 - 15</label>
                    </div>
                    <div class="input-wrapper">
                        <input type="number" id="r_avg_p2o52" required class="numeric-input"
                            placeholder="R.Average of P2O52" min="11" max="33" step="0.1" >
                        <span id="avg_r_p2o5_error" class="error-message"></span>
                        <label for="r_avg_p2o52">Value between 11 - 33</label>
                    </div>
                    <div class="input-wrapper">
                        <input type="number" id="r_avg_solids" required class="numeric-input"
                            placeholder="R.Average of Solids" min="16" max="37" step="0.1" >
                        <span id="avg_r_solids_error" class="error-message"></span>
                        <label for="r_avg_solids">Value between 16 - 37</label>
                    </div>
                    <div class="input-wrapper">
                        <input type="number" id="r_avg_so4" required class="numeric-input"
                            placeholder="R.Average of SO4" min="0.1" max="6" step="0.1">
                        <span id="avg_r_so4_error" class="error-message"></span>
                        <label for="r_avg_so4">Value between 0.1 - 6</label>
                    </div>
                </div>
                <div class="input-container">
                    <div class="input-wrapper">
                        <input type="number" id="inputs" required class="numeric-input" placeholder="Inputs" min="1000"
                            max="5945" step="0.01">
                        <span id="input_error" class="error-message"></span>
                        <label for="inputs">Value between 1000 - 5945</label>
                    </div>
                </div>
                <button type="submit" class="butn rounded">Run</button>
                <div id="prediction-result" class="prediction-result" style="margin-top: 20px; font-weight: bold;">
                </div>
            </form>
        </div>
    </section>
    <script>
        function scrollToSection(sectionId) {
            const section = document.querySelector(sectionId);
            if (section) {
                section.scrollIntoView({ behavior: 'smooth', block: 'start' });
            }
        }
    </script>
    <script type="modyle" src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"></script>
    <script nomodule src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        crossorigin="anonymous"></script>
</body>

</html>